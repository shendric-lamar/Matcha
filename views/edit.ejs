<%- include('./includes/header') %>
<div id="here"></div>
<div class="row mt-5">
    <div class="col-md-6 m-auto">
        <div class="card card-body jumbotron">
            <h1 class="text-center mb-3">
                <i class="fas fa-user-plus"></i> Edit Personal Info
            </h1>
            <%- include('./partials/messages') %>
            <p id="username" style="visibility: hidden"><%= user.username %></p>
            <form action="/profile/edit" method="POST">
                <div class="form-group">
                    <label for="fname">First Name</label>
                    <input type="name" id="fname" name="fname" class="form-control" placeholder="Enter First Name"
                        value="<%= typeof user.fname != 'undefined' ? user.fname : '' %>" />
                </div>
                <div class="form-group">
                    <label for="lname">Last Name</label>
                    <input type="name" id="lname" name="lname" class="form-control" placeholder="Enter Last Name"
                        value="<%= typeof user.lname != 'undefined' ? user.lname : '' %>" />
                </div>
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="name" id="username" name="username" class="form-control" placeholder="Enter Username"
                        value="<%= typeof user.username != 'undefined' ? user.username : '' %>" />
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender" class="form-control" placeholder="Male or female">
                        <option <%= user.gender == 'Male' ? 'selected' : 'not-selected'%>>Male</option>
                        <option <%= user.gender == 'Female' ? 'selected' : 'not-selected'%>>Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="orientation">Sexual Orientation</label>
                    <select type="text" id="orientation" name="orientation" class="form-control">
                        <option <%= user.orientation == 'Heterosexual' ? 'selected' : ''%>>Heterosexual</option>
                        <option <%= user.orientation == 'Homosexual' ? 'selected' : ''%>>Homosexual</option>
                        <option <%= user.orientation == 'Bisexual' ? 'selected' : ''%>>Bisexual</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tags">Tags</label>
                    <input type="text" id="tags" name="tags" class="form-control"
                        placeholder="Your interests. Seperate the different tags by a space!"
                        value="<%= typeof user.tags != 'undefined' ? user.tags.join(' ') : '' %>" />
                </div>
                <div class="form-group">
                    <label for="bio">Biography</label>
                    <textarea type="text" id="bio" name="bio" class="form-control"
                        rows="3" value="<%= typeof user.bio != 'undefined' ? user.bio : '' %>"><%= user.bio %></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    Save
                </button>
            </form>
        </div>
    </div>
</div>
<script>
    var user = document.querySelector("#username").innerHTML;
    socket.emit('login', user);

    socket.on('notif', (notif, user, user2) => {
        $("#here").append(
        '<div class="alert alert-dismissible alert-primary" style="font-size: 15px;" role="alert">' + notif +
        '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
        '<span aria-hidden="true">&times;</span>' +
        '</button></div >');
    });
</script>